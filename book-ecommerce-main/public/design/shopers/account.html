<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shoper</title>
    <link rel="icon" href="assets/img/dark.jpg" type="image/gif" sizes="16x16">
    <!------------------ CSS FILES ------------------>
    <!-- Bootstrap v4.5.0 -->
    <!-- FontAwesome v5.13.1 -->
    <link rel="stylesheet" type="text/css" href="assets/lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/lib/fontawesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/index.css">    
    <link rel="stylesheet" type="text/css" href="assets/lib/swiper/swiper-bundle.css">    
    
    <!------------------ JS FILES ------------------>
    <script type="text/javascript" src="assets/lib/jquery.js"></script>
    <script type="text/javascript" src="assets/lib/bootstrap/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="assets/lib/swiper/swiper-bundle.js"></script>
    <script type="text/javascript" src="assets/lib/sweetalert/sweetalert.min.js"></script>  
</head>
<body>


<!-- For Backlight -->
<div class='random'></div>

<!-- Header -->
<div class="header border-bottom">
    <!-- Sidenav Button---->
    <button class='shoper_sidenav_btn'><img src="./assets/img/ronaldo.jpg"></button>
    <!-- Side Navbar-------->
    <sidenav class='sidenav'>
        <ul>
            <li><img src='./assets/img/ronaldo.jpg'><p>Ronaldo</p></li>
            <li><a href='/shoper/account/'><i class='far fa-user'></i>Your Profile</a></li>
            <li><a href='/shoper/account/'><i class='fas fa-lock'></i>Change Password</a></li>
            <li><a href='/shoper/account/'><i class='fas fa-map-marker-alt'></i>Address</a></li>
            <li><a href='/shoper/account/'><i class='fas fa-user-friends'></i>Manage Customers</a></li>
            <li><a href='/shoper/account/'><i class='far fa-envelope'></i>Mails</a></li>
            <li><a href='/shoper/account/'><i class='far fa-trash-alt'></i>Delete Account</a></li>
            <li><a href='/shoper/signout/'><i class='fas fa-sign-out-alt'></i>Logout</a></li>
        </ul>
    </sidenav>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg text-secondary shoper_nav">
        <button class="navbar-toggler ml-auto" data-toggle="collapse" data-target="#shoper_menu"><i class="fas fa-bars"></i></button>
        <div class="collapse navbar-collapse ml-auto" id="shoper_menu">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item mr-4">
                    <a class="nav-link" href="/shoper/product/add_form">Add Product</a></li>
                <li class="nav-item mr-4">
                    <a class="nav-link" href="/shoper/products">Products</a></li>
                <li class="nav-item mr-4">
                    <a class="nav-link" href="/shoper/orders">Orders</a></li>
                <li class='nav-item mr-4'>
                    <a class='nav-link' href='/shoper/signout'>
                        <i class='fas fa-sign-out-alt'></i>Logout</a></li>
                <!-- <li class='nav-item mr-4'><a class='nav-link' href='/shoper'>Login</a></li> -->
            </ul>
        </div>        
    </nav><!-- NavbarEnd Here.... -->
</div><!-- End Header -->

<script>

    $('.shoper_sidenav_btn').click(function(){
        $('.sidenav').addClass('show_sidenav');
        $('.random').addClass('backlight');
    });

    $('.random').click(function(){
        $('.sidenav').removeClass('show_sidenav');
        $('.random').removeClass('backlight');
    });

</script>

<main>
	<div class='account'>
		<div class="a_left">
		   <ul>
		      	<li><img src="./assets/img/ronaldo.jpg"><p>Ronaldo</p></li>
		     	<li><a href="#" onclick="Component('profile');">
		     		<i class="far fa-user"></i>Your Profile</a></li>
		      	<li><a href="#" onclick="Component('password');">
		      		<i class="fas fa-lock"></i>Change Password</a></li>
		      	<li><a href="#" onclick="Component('address');">
		      		<i class="fas fa-map-marker-alt"></i>Address</a></li>
		      	<li><a href="#" onclick="Component('delete');">
		      		<i class="far fa-trash-alt"></i>Delete Account</a></li>
		      	<li><a href="/shoper/signout">
		      		<i class="fas fa-sign-out-alt"></i>Logout</a></li>
		   </ul>
		</div>

		<div class="a_right px-lg-5 pt-5 px-4">

			<form class="person_info" action="/shoper/account/update/profile" method="POST" enctype="multipart/form-data">
				<h5 class='mb-3'>Your Information</h5>
				<div><label>Your Name</label><input type="text" name="name" value="Ronaldo" ></div>
				<div><label>Email Address</label><input type="text" name="email" value="ronaldo@gmail.com" disabled></div>
				<div><label>Mobile</label><input type="text" name="mobile" value="7890654321"></div>
				<div class="custom-file">
				  <input type="file" name="img" class="custom-file-input" id="img">
				  <label class="custom-file-label m-0" for="img">Choose Profile Image</label>
				</div>
				<div><input class="btn btn-outline-primary" type="submit" value="Change / Update"></div>
			</form>

			<form class="change_pswd" action="/shoper/account/update/password" method="POST">
				<h5 class='mb-3'>Change Password</h5>
				<input type="password" name="pswd" placeholder="Old Password" required>
				<input type="password" name="npswd" placeholder="New Password" required>
				<input type="password" name="cpswd" placeholder="Confirm Password" required>
				<input class="btn btn-outline-primary" type="submit" value="Change">
			</form>

			<form class="del_account" action="/shoper/account/delete" method="POST">
				<h5 class="mb-3">Account Delete</h5>
				<textarea name="del_reason" placeholder="Why You Delete the Account?" required></textarea>
				<input type="password" placeholder="Password" name="pswd" required>
				<input type="submit" class="btn btn-danger"  value="Delete">
			</form>	

			<form class="person_adrs" action="/shoper/account/update/address" method="POST">
				<h5 class="mb-3">Address</h5>
				<div><label>State</label><select name="state" onchange="find_city(this.value)">
					<option value="{{$s->state}}">Gujarat</option>
				</select></div>
				<div><label>Citys</label><select name="city">
					<option value="{{$c->city}}">Idar</option>
					<option value="{{$c->city}}">Idar</option>
					<option value="{{$c->city}}">Idar</option>
					<option value="{{$c->city}}">Idar</option>
				</select></div>
				<div><label>Delivery Address</label><textarea name="address" required>20, this address, near this road</textarea></div>
				<div><label>Zip Code</label><input type="text" name="zcode" value="786543" required></div>
				<div><input type="submit" name="btn" class="btn btn-outline-primary" value="UPDATE"></div>
			</form>
		</div><!-- End a_right -->
	</div><!-- End Acoount -->
</main>

<script>

	function Component(val){
		$('.a_right').children('form').addClass('d-none');
		if(val=='profile')
			$('.person_info').removeClass('d-none');
		else if(val=='password')
			$('.change_pswd').removeClass('d-none');
		else if(val=='address')
			$('.person_adrs').removeClass('d-none');
		else if(val=='delete')
			$('.del_account').removeClass('d-none');	
	}
	Component('profile');

	const db_state = `{{$shoper->state}}`;
	const db_city = `{{$shoper->city}}`;
	$('[name="state"]').val(db_state).change();
		
	//This function we have to fix in livewire...
	setTimeout(function(){
		$('[name="city"]').val(db_city).change();
	},2000);
	

	function find_city(state){
		const city_option = $('[name="city"]')[0];
		$.ajax({
			url:'/find_city/'+state, 
			method: 'GET',
			success:function(res){
				const city = JSON.parse(res);
				city_option.innerHTML = "";
				for(let i = 0; i< city.length; i++){
					city_option.innerHTML += "<option value='"+city[i]['city']+"'>"+city[i]['city']+"</option>";				
				}
			}
		});
	}

</script>

</body>
</html>  